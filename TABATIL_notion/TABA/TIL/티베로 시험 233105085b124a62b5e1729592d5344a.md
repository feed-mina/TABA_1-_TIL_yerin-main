# 티베로 시험

1. 주어진 조건에 의한 설치
2. 올바르게 점검

SELECT 쿼리를 통해 맞게 설치를 했는지 점검 

실기로 시험 / 조건에 맞게 설치했는지

언급되지 않는 내용도 추가될수 있다

오픈북 !

SET ECHO ON

SELECT INSTANCE_NAME FROM V$INSTANCE;

그 사이에 쿼리를 적는다.

QUIT

tbsql sys/tibero @sample.sql(@실행하고자하는sql파일

) ←-sql스크립트파일

점검하는 방법

vi sample.sql

시험시간은 수업 시간안에 포함 : 유동적으로 변한다.

오전에 시험을 보기로, 오후에도 시험을 볼 예정

```
<$TB_SID.tip>

DB_NAME=$TB_SID
LISTENER_PORT=8629
CONTROL_FILES="$TB_HOME/database/tibero/c1.ctl"

MAX_SESSION_COUNT=20

TOTAL_SHM_SIZE=1G
MEMORY_TARGET=2G
```

```
[tibero@T1:/DataDisk/T1/tibero2]$ tbdown
tbdown failed. proc info file is deleted.
Hint: Please check if the tbsvr instance was already stopped.
[tibero@T1:/DataDisk/T1/tibero2]$ ps -ef | grep tbsvr
tibero   26233 18629  0 11:34 pts/1    00:00:00 grep --color=auto tbsvr

  #tbdown 되었는지 확인하려면 ps 명령어로 프로세스 살아있나 체크

[tibero@T1:/DataDisk/T1/tibero2]$ cp tbdata2/*.ctl tbdata

  #Control File 만 해당 경로에 복사

[tibero@T1:/DataDisk/T1/tibero2]$ ls -l tbdata
total 44576
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c2.ctl

  #Control File만 있는 상태
  
[tibero@T1:/DataDisk/T1/tibero2]$ tbboot

  #디폴트 값인 Normal모드로 부트시킴

Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

********************************************************
* Critical Warning : Raise svmode failed. The reason is
*   TBR-1024 :  Database needs media recovery: open failed(/DataDisk/T1/tibero2/tbdata/system001.dtf).
*   Current server mode is MOUNT.
********************************************************

  #파일이 손상되거나 찾을 수 없을 때 나오는 에러 메시지
  #에러 내용 미디어 복구가 필요 (미디어 : 저장장치(하드디스크))
  #에러 다음은 진행하지 않고, Open 모드 못하고 Mount모드까지만 함.
  #즉, 다른 파일은 문제가 없다는 뜻은 아님.
  #쿼리 접근 불가

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started suspended at MOUNT mode.
```

```
[tibero@T1:/DataDisk/T1/tibero2]$ tbsql tibero/tmax

tbSQL 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.

TBR-12021: Only SYS user can log on in restricted boot mode.

SQL> SELECT NAME FROM V%DATAFILE;
TBS-70004: Not connected to the server.

SQL> SELECT NAME FROM V%DATAFILE;
TBS-70004: Not connected to the server.

SQL> CONN SYS/TIBERO
TBR-17001: Login failed: invalid user name or password.

SQL> SELECT NAME FROM V$DATAFILE;
TBS-70004: Not connected to the server.

SQL> quit
```

```
[tibero@T1:/DataDisk/T1/tibero2]$ cp tbdata2/.passwd tbdata
[tibero@T1:/DataDisk/T1/tibero2]$ ls -l tbdata
total 44576
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c2.ctl
[tibero@T1:/DataDisk/T1/tibero2]$ ls -al tbdata
total 44580
drwxr-xr-x 2 tibero dba       49 Jul 14 11:43 .
drwxr-xr-x 5 tibero dba       47 Jul 14 11:25 ..
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c2.ctl
-r-------- 1 tibero dba       24 Jul 14 11:43 .passwd
[tibero@T1:/DataDisk/T1/tibero2]$ tbsql sys/tibero

tbSQL 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.

Connected to Tibero.
 
 #로그인이 잘되는 것을 확인
 #Data File에서 name을 조회
 
SQL> SELECT NAME FROM V$DATAFILE;

NAME
--------------------------------------------------------------------------------
/DataDisk/T1/tibero2/tbdata/system001.dtf
/DataDisk/T1/tibero2/tbdata/undo001.dtf
/DataDisk/T1/tibero2/tbdata/usr001.dtf
/DataDisk/T1/tibero2/tbdata/syssub001.dtf

4 rows selected.
```

```
SQL> q!
Disconnected.
[tibero@T1:/DataDisk/T1/tibero2]$ tbdown

Tibero instance terminated (NORMAL mode).

[tibero@T1:/DataDisk/T1/tibero2]$ ps -ef | grep tbsvr
tibero   27374 18629  0 11:46 pts/1    00:00:00 grep --color=auto tbsvr

  #tbdown, tbboot를 하고 항상 ps 명령어로 프로세스가 정상 다운, 기동되었는지 확인
  
[tibero@T1:/DataDisk/T1/tibero2]$ ls -l tbdata2
total 710168
-rw------- 1 tibero dba  22822912 Jul 14 11:23 c1.ctl
-rw------- 1 tibero dba  22822912 Jul 14 11:23 c2.ctl
drwx------ 2 tibero dba        70 Jul 13 16:56 java
-rw------- 1 tibero dba  52428800 Jul 14 11:22 log01.log
-rw------- 1 tibero dba  52428800 Jul 14 11:23 log11.log
-rw------- 1 tibero dba  52428800 Jul 14 11:22 log21.log
-rw------- 1 tibero dba  52428800 Jul 14 11:23 syssub001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:23 system001.dtf
-rw------- 1 tibero dba 104857600 Jul 13 16:46 temp001.dtf
-rw------- 1 tibero dba 209715200 Jul 14 11:23 undo001.dtf
-rw------- 1 tibero dba  52428800 Jul 14 11:23 usr001.dtf

[tibero@T1:/DataDisk/T1/tibero2]$ cp tbdata2/*.dtf tbdata
[tibero@T1:/DataDisk/T1/tibero2]$ cp tbdata2/*.log tbdata
[tibero@T1:/DataDisk/T1/tibero2]$ cd tbdata

  #tbdata2에 형성한 모든 데이터베이스 파일을 tbdata로 복사

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ ll
total 710168
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c2.ctl
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log01.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log11.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log21.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 syssub001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 system001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 temp001.dtf
-rw------- 1 tibero dba 209715200 Jul 14 11:48 undo001.dtf
-rw------- 1 tibero dba  52428800 Jul 14 11:48 usr001.dtf
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ rm usr001.dtf

  #완벽한 상태에서 인위적으로 usr001.dtf 파일을 삭제

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ ll
total 658968
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c2.ctl
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log01.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log11.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log21.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 syssub001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 system001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 temp001.dtf
-rw------- 1 tibero dba 209715200 Jul 14 11:48 undo001.dtf
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbboot
Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

********************************************************
* Critical Warning : Raise svmode failed. The reason is
*   TBR-1024 :  Database needs media recovery: open failed(/DataDisk/T1/tibero2/tbdata/usr001.dtf).
*   Current server mode is MOUNT.
********************************************************

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started suspended at MOUNT mode.

  #usr001.dtf 파일이 없어서 오류남........... 마운트 모드로 열림.
```

```
 [tibero@T1:/DataDisk/T1/tibero2/tbdata2]$ tbdown

Tibero instance terminated (NORMAL mode).

[tibero@T1:/DataDisk/T1/tibero2/tbdata2]$ ps -ef | grep tbsvr
tibero   27902 18629  0 11:51 pts/1    00:00:00 grep --color=auto tbsvr

[tibero@T1:/DataDisk/T1/tibero2/tbdata2]$ cp usr001.dtf /DataDisk/T1/tibero2/tbdata

  #usr001.dtf를 디렉터리에 복사하여 복원

[tibero@T1:/DataDisk/T1/tibero2]$ ll
total 0
drwxr-xr-x 2 tibero dba   6 Jul 13 15:59 arch
drwxr-xr-x 2 tibero dba 198 Jul 14 11:53 tbdata
drwxr-xr-x 3 tibero dba 210 Jul 13 16:56 tbdata2
[tibero@T1:/DataDisk/T1/tibero2]$ cd tbdata
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ ll
total 710168
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c2.ctl
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log01.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log11.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log21.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 syssub001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 system001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 temp001.dtf
-rw------- 1 tibero dba 209715200 Jul 14 11:48 undo001.dtf
-rw------- 1 tibero dba  52428800 Jul 14 11:53 usr001.dtf

  #이번에는 로그파일 하나 삭제하고 기동해봄.

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ rm log21.log
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbboot
Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

********************************************************
* Critical Warning : Raise svmode failed. The reason is
*   TBR-1042 :  Unable to read log member file in group 2, member -1 (), block 15346467.
*   Current server mode is MOUNT.
********************************************************

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started suspended at MOUNT mode.

  #역시 오류 발생으로 Mount 모드로 부팅
```

```
 tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbdown

Tibero instance terminated (NORMAL mode).

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ ps -ef | grep tbsvr
tibero   28346 18629  0 11:54 pts/1    00:00:00 grep --color=auto tbsvr

...#디렉터리 이동은 생략

[tibero@T1:/DataDisk/T1/tibero2/tbdata2]$ cp log21.log /DataDisk/T1/tibero2/tbdata

...#디렉터리 이동은 생략

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ ll
total 710168
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c2.ctl
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log01.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log11.log
-rw------- 1 tibero dba  52428800 Jul 14 11:55 log21.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 syssub001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 system001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 temp001.dtf
-rw------- 1 tibero dba 209715200 Jul 14 11:48 undo001.dtf
-rw------- 1 tibero dba  52428800 Jul 14 11:53 usr001.dtf

  #3번째로 temp 관련 데이터파일을 삭제해봄

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ rm temp001.dtf
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbboot
Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started up (NORMAL mode).

  #temp 관련 파일은 없어도 노말모드로 기동됨.
  #에러도 나지 않음
  #다시 조회해봄 => temp001.dtf는 다시 나옴 => 임시파일
```

```
 SET ECHO ON

CREATE DATABASE
USER sys IDENTIFIED BY tibero
MAXDATAFILES 256
CHARACTER SET MSWIN949 -- UTF8, EUCKR, ASCII ...
NATIONAL CHARACTER SET UTF16
LOGFILE
GROUP 0 '/DataDisk/T1/tibero3/tbdata/log01.log' SIZE 50M,	#디렉토리를 절대경로로 넣음
GROUP 1 '/DataDisk/T1/tibero3/tbdata/log11.log' SIZE 50M,	#명시X=>정의된 경로에 만들어짐
GROUP 2 '/DataDisk/T1/tibero3/tbdata/log21.log' SIZE 50M
MAXLOGFILES 100
MAXLOGMEMBERS 2
NOARCHIVELOG
DATAFILE 'system001.dtf' SIZE 100M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
DEFAULT TEMPORARY TABLESPACE TEMP
TEMPFILE 'temp001.dtf' SIZE 100M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
EXTENT MANAGEMENT LOCAL AUTOALLOCATE
UNDO TABLESPACE UNDO
DATAFILE 'undo001.dtf' SIZE 200M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 128k
DEFAULT TABLESPACE USR
DATAFILE 'usr001.dtf' SIZE 50m
AUTOEXTEND ON NEXT 64m MAXSIZE 3G
SYSSUB
DATAFILE 'syssub001.dtf' SIZE 50m
AUTOEXTEND ON NEXT 64M MAXSIZE 3G ;
```

```
 tbsql sys/tibero @/tibero/edu3/credb.sql
```

```
 1. 티베로 인스턴스 구동을 위한 작업

      -tibero6 디렉토리에 대한 작업

      -완료 이후, tbboot nomount 성공

  2. 데이터베이스 생성 작업

      -create database - 쿼리에 의해 실행

      -datafile, redologfile, controlfile 생성

      -dictionary, system object 생성

      -완료이후, tbboot (normal모드) 성공
```

```
 cp /tibero/s/tibero6* /tibero/edu3
cp /tibero/tibero6/license/license.xml /tibero/edu3
```

```
 ls -al ~/.bash_profile
vi ~/.bash_profile
```

```
 tar -xvzf tibero6-bin*tar.gz
```

```
 cp /tibero/edu3/license.xml $TB_HOME/license
cat $TB_HOME/license/license.xml
```

```
 cd $TB_HOME/config
./gen_tip.sh
ls -l $TB_HOME/config/$TB_SID.tip
ls -l $TB_HOME/client/config/tbdsn.tbr
```

```
 ps -ef | grep tbsvr
```

```
 SET ECHO ON

CREATE DATABASE
USER sys IDENTIFIED BY tibero
MAXDATAFILES 256
CHARACTER SET MSWIN949 -- UTF8, EUCKR, ASCII ...
NATIONAL CHARACTER SET UTF16
LOGFILE
GROUP 0 '/DataDisk/T1/tibero3/tbdata/log01.log' SIZE 50M,	#디렉토리를 절대경로로 넣음
GROUP 1 '/DataDisk/T1/tibero3/tbdata/log11.log' SIZE 50M,	#명시X=>정의된 경로에 만들어짐
GROUP 2 '/DataDisk/T1/tibero3/tbdata/log21.log' SIZE 50M
MAXLOGFILES 100
MAXLOGMEMBERS 2
NOARCHIVELOG
DATAFILE 'system001.dtf' SIZE 100M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
DEFAULT TEMPORARY TABLESPACE TEMP
TEMPFILE 'temp001.dtf' SIZE 100M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
EXTENT MANAGEMENT LOCAL AUTOALLOCATE
UNDO TABLESPACE UNDO
DATAFILE 'undo001.dtf' SIZE 200M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 128k
DEFAULT TABLESPACE USR
DATAFILE 'usr001.dtf' SIZE 50m
AUTOEXTEND ON NEXT 64m MAXSIZE 3G
SYSSUB
DATAFILE 'syssub001.dtf' SIZE 50m
AUTOEXTEND ON NEXT 64M MAXSIZE 3G ;
```

```
 tbsql sys/tibero @/tibero/edu3/credb.sql
```

```
 tbboot
 cd $TB_HOME/scripts
 system.sh -h
 sh system.sh -p1 tibero -p2 syscat -a1 y -a2 y -a3 y -a4 y
```

```
 tbdown
tbboot
cp /tibero/examples/sql/_object_cnt.sql /tibero/edu3
tbsql sys/tibero @/tibero/edu3/_object_cnt.sql
----------------------------------------------------------------------
OWNER      OBJECT_TYPE               STATUS       COUNT(1)
---------- ------------------------- ---------- ----------
OUTLN      INDEX                     VALID               1
OUTLN      TABLE                     VALID               2
PUBLIC     SYNONYM                   VALID             947
SYS        DIRECTORY                 VALID               3
SYS        FUNCTION                  VALID               4
SYS        INDEX                     VALID             265
SYS        JAVA                      VALID               1
SYS        LOB                       VALID               6
SYS        PACKAGE                   VALID             112
SYS        PACKAGE BODY              VALID              48
SYS        SEQUENCE                  VALID              29
SYS        SQL TRANSLATION PROFILE   VALID               2
SYS        SYNONYM                   VALID               1
SYS        TABLE                     VALID             481
SYS        TRIGGER                   VALID               2
SYS        TYPE                      VALID              82
SYS        TYPE BODY                 VALID               1
SYS        VIEW                      VALID             297
SYSCAT     VIEW                      VALID             360
SYSGIS     INDEX                     VALID               2
SYSGIS     PROCEDURE                 VALID               4
SYSGIS     TABLE                     VALID               2
SYSGIS     TRIGGER                   VALID               3
SYSGIS     VIEW                      VALID               3

24 rows selected.
```

![Untitled](%E1%84%90%E1%85%B5%E1%84%87%E1%85%A6%E1%84%85%E1%85%A9%20%E1%84%89%E1%85%B5%E1%84%92%E1%85%A5%E1%86%B7%20233105085b124a62b5e1729592d5344a/Untitled.png)

![Untitled](%E1%84%90%E1%85%B5%E1%84%87%E1%85%A6%E1%84%85%E1%85%A9%20%E1%84%89%E1%85%B5%E1%84%92%E1%85%A5%E1%86%B7%20233105085b124a62b5e1729592d5344a/Untitled%201.png)

```
 SQL> SELECT NAME FROM V$DATAFILE;

NAME
--------------------------------------------------------------------------------
/DataDisk/T1/tibero3/tbdata/system001.dtf
/DataDisk/T1/tibero3/tbdata/undo001.dtf
/DataDisk/T1/tibero3/tbdata/usr001.dtf
/DataDisk/T1/tibero3/tbdata/syssub001.dtf

4 rows selected.

SQL> SELECT MEMBER FROM V$LOGFILE;

MEMBER
--------------------------------------------------------------------------------
/DataDisk/T1/tibero3/tbdata/log01.log
/DataDisk/T1/tibero3/tbdata/log11.log
/DataDisk/T1/tibero3/tbdata/log21.log

SQL> SELECT NAME FROM V$CONTROLFILE;

NAME
--------------------------------------------------------------------------------
/DataDisk/T1/tibero3/tbdata/c1.ctl
/DataDisk/T1/tibero3/tbdata/c2.ctl
```

```
 SQL> SELECT VALUE/1024/1024 FROM V$PARAMETERS WHERE NAME='MEMORY_TARGET';

VALUE/1024/1024
---------------
           2200
```

```
 SQL> SELECT VALUE/1024/1024 FROM V$PARAMETERS WHERE NAME='TOTAL_SHM_SIZE';

VALUE/1024/1024
---------------
           1000

SQL> SELECT TOTAL/1024/1024 FROM V$SGA WHERE NAME='SHARED MEMORY';

TOTAL/1024/1024
---------------
           1000

SQL> !ipcs -a

------ Message Queues --------
key        msqid      owner      perms      used-bytes   messages

------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status
0xce102cdf 65536      tibero     640        1048576000 13

------ Semaphore Arrays --------
key        semid      owner      perms      nsems
0x176b87ad 8519680    tibero     600        2
```

```
 SQL> SELECT VALUE FROM V$PARAMETERS WHERE NAME='MAX_SESSION_COUNT';

VALUE
--------------------------------------------------------------------------------
30

SQL> !ps -ef | grep tbsvr_FGWP
tibero   14851 14847  0 12:00 pts/1    00:00:00 tbsvr_FGWP000  -t NORMAL -SVR_SID tmax
tibero   14852 14847  0 12:00 pts/1    00:00:00 tbsvr_FGWP001  -t NORMAL -SVR_SID tmax
tibero   14853 14847  0 12:00 pts/1    00:00:04 tbsvr_FGWP002  -t NORMAL -SVR_SID tmax
tibero   21236 20396  0 13:25 pts/2    00:00:00 sh -c ps -ef | grep tbsvr_FGWP
tibero   21238 21236  0 13:25 pts/2    00:00:00 grep tbsvr_FGW
```

```
 [tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbdown

Tibero instance terminated (NORMAL mode).

[tibero@T1:/DataDisk/T1/tibero2]$ ll
total 0
drwxr-xr-x 2 tibero dba   6 Jul 13 15:59 arch
drwxr-xr-x 3 tibero dba 210 Jul 13 16:56 tbdata
[tibero@T1:/DataDisk/T1/tibero2]$ ll
total 0
drwxr-xr-x 2 tibero dba   6 Jul 13 15:59 arch
drwxr-xr-x 3 tibero dba 210 Jul 13 16:56 tbdata
[tibero@T1:/DataDisk/T1/tibero2]$ mv tbdata tbdata2		#Data File의 이름을 변경
[tibero@T1:/DataDisk/T1/tibero2]$ ll
total 0
drwxr-xr-x 2 tibero dba   6 Jul 13 15:59 arch
drwxr-xr-x 3 tibero dba 210 Jul 13 16:56 tbdata2
[tibero@T1:/DataDisk/T1/tibero2]$ tbboot
Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

********************************************************
*   Warning: Control file open failed
*    /DataDisk/T1/tibero2/tbdata/c1.ctl
********************************************************

********************************************************
*   Warning: Control file open failed
*    /DataDisk/T1/tibero2/tbdata/c2.ctl
********************************************************

********************************************************
* Critical Warning : Raise svmode failed. The reason is
*   TBR-24003 :  Unable to read control file.
*   Current server mode is NOMOUNT.
********************************************************

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started suspended at NOMOUNT mode.
  #nomount로 실행됨.
```

```
 tibero@T1:/DataDisk/T1/tibero2]$ tbdown
tbdown failed. proc info file is deleted.
Hint: Please check if the tbsvr instance was already stopped.
[tibero@T1:/DataDisk/T1/tibero2]$ ps -ef | grep tbsvr
tibero   26233 18629  0 11:34 pts/1    00:00:00 grep --color=auto tbsvr

  #tbdown 되었는지 확인하려면 ps 명령어로 프로세스 살아있나 체크

[tibero@T1:/DataDisk/T1/tibero2]$ cp tbdata2/*.ctl tbdata

  #Control File 만 해당 경로에 복사

[tibero@T1:/DataDisk/T1/tibero2]$ ls -l tbdata
total 44576
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c2.ctl

  #Control File만 있는 상태
  
[tibero@T1:/DataDisk/T1/tibero2]$ tbboot

  #디폴트 값인 Normal모드로 부트시킴

Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

********************************************************
* Critical Warning : Raise svmode failed. The reason is
*   TBR-1024 :  Database needs media recovery: open failed(/DataDisk/T1/tibero2/tbdata/system001.dtf).
*   Current server mode is MOUNT.
********************************************************

  #파일이 손상되거나 찾을 수 없을 때 나오는 에러 메시지
  #에러 내용 미디어 복구가 필요 (미디어 : 저장장치(하드디스크))
  #에러 다음은 진행하지 않고, Open 모드 못하고 Mount모드까지만 함.
  #즉, 다른 파일은 문제가 없다는 뜻은 아님.
  #쿼리 접근 불가

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started suspended at MOUNT mode.
```

```
 [tibero@T1:/DataDisk/T1/tibero2]$ tbsql tibero/tmax

tbSQL 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.

TBR-12021: Only SYS user can log on in restricted boot mode.

SQL> SELECT NAME FROM V%DATAFILE;
TBS-70004: Not connected to the server.

SQL> SELECT NAME FROM V%DATAFILE;
TBS-70004: Not connected to the server.

SQL> CONN SYS/TIBERO
TBR-17001: Login failed: invalid user name or password.

SQL> SELECT NAME FROM V$DATAFILE;
TBS-70004: Not connected to the server.

SQL> quit
```

```
 [tibero@T1:/DataDisk/T1/tibero2]$ cp tbdata2/.passwd tbdata
[tibero@T1:/DataDisk/T1/tibero2]$ ls -l tbdata
total 44576
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c2.ctl
[tibero@T1:/DataDisk/T1/tibero2]$ ls -al tbdata
total 44580
drwxr-xr-x 2 tibero dba       49 Jul 14 11:43 .
drwxr-xr-x 5 tibero dba       47 Jul 14 11:25 ..
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c2.ctl
-r-------- 1 tibero dba       24 Jul 14 11:43 .passwd
[tibero@T1:/DataDisk/T1/tibero2]$ tbsql sys/tibero

tbSQL 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.

Connected to Tibero.
 
 #로그인이 잘되는 것을 확인
 #Data File에서 name을 조회
 
SQL> SELECT NAME FROM V$DATAFILE;

NAME
--------------------------------------------------------------------------------
/DataDisk/T1/tibero2/tbdata/system001.dtf
/DataDisk/T1/tibero2/tbdata/undo001.dtf
/DataDisk/T1/tibero2/tbdata/usr001.dtf
/DataDisk/T1/tibero2/tbdata/syssub001.dtf

4 rows selected.
```

```
 SQL> q!
Disconnected.
[tibero@T1:/DataDisk/T1/tibero2]$ tbdown

Tibero instance terminated (NORMAL mode).

[tibero@T1:/DataDisk/T1/tibero2]$ ps -ef | grep tbsvr
tibero   27374 18629  0 11:46 pts/1    00:00:00 grep --color=auto tbsvr

  #tbdown, tbboot를 하고 항상 ps 명령어로 프로세스가 정상 다운, 기동되었는지 확인
  
[tibero@T1:/DataDisk/T1/tibero2]$ ls -l tbdata2
total 710168
-rw------- 1 tibero dba  22822912 Jul 14 11:23 c1.ctl
-rw------- 1 tibero dba  22822912 Jul 14 11:23 c2.ctl
drwx------ 2 tibero dba        70 Jul 13 16:56 java
-rw------- 1 tibero dba  52428800 Jul 14 11:22 log01.log
-rw------- 1 tibero dba  52428800 Jul 14 11:23 log11.log
-rw------- 1 tibero dba  52428800 Jul 14 11:22 log21.log
-rw------- 1 tibero dba  52428800 Jul 14 11:23 syssub001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:23 system001.dtf
-rw------- 1 tibero dba 104857600 Jul 13 16:46 temp001.dtf
-rw------- 1 tibero dba 209715200 Jul 14 11:23 undo001.dtf
-rw------- 1 tibero dba  52428800 Jul 14 11:23 usr001.dtf

[tibero@T1:/DataDisk/T1/tibero2]$ cp tbdata2/*.dtf tbdata
[tibero@T1:/DataDisk/T1/tibero2]$ cp tbdata2/*.log tbdata
[tibero@T1:/DataDisk/T1/tibero2]$ cd tbdata

  #tbdata2에 형성한 모든 데이터베이스 파일을 tbdata로 복사

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ ll
total 710168
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c2.ctl
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log01.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log11.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log21.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 syssub001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 system001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 temp001.dtf
-rw------- 1 tibero dba 209715200 Jul 14 11:48 undo001.dtf
-rw------- 1 tibero dba  52428800 Jul 14 11:48 usr001.dtf
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ rm usr001.dtf

  #완벽한 상태에서 인위적으로 usr001.dtf 파일을 삭제

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ ll
total 658968
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba  22822912 Jul 14 11:34 c2.ctl
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log01.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log11.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 log21.log
-rw------- 1 tibero dba  52428800 Jul 14 11:48 syssub001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 system001.dtf
-rw------- 1 tibero dba 104857600 Jul 14 11:48 temp001.dtf
-rw------- 1 tibero dba 209715200 Jul 14 11:48 undo001.dtf
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbboot
Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

********************************************************
* Critical Warning : Raise svmode failed. The reason is
*   TBR-1024 :  Database needs media recovery: open failed(/DataDisk/T1/tibero2/tbdata/usr001.dtf).
*   Current server mode is MOUNT.
********************************************************

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started suspended at MOUNT mode.

  #usr001.dtf 파일이 없어서 오류남........... 마운트 모드로 열림.
```

```
 ###세션1 - tibero 계정 접속

login as: tibero
tibero@192.168.56.241's password:
Last login: Wed Jul 14 09:56:37 2021 from 192.168.56.1
[tibero@T1:/home/tibero]$ tbsql tibero/tmax

tbSQL 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.

Connected to Tibero.

SQ
```

```
 [tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbdown -h
Usage: tbdown [-h] [-t DOWNMODE]
  DOWNMODE : NORMAL, POST_TX, IMMEDIATE, ABORT, SWITCHOVER, ABNORMAL
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbdown NORMAL
```

```
 SQL> DISCONNECT
```

```
 ### 세션2 - sys 계정

Tibero instance terminated (NORMAL mode).

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$
```

```
 ###세션1 - tibero 계정

SQL> CONNECT
Enter Username: tibero
Enter Password:
Connected to Tibero.

SQL> CREATE TABLE T1(C1 NUMBER) ;

Table 'T1' created.

SQL> INSERT INTO T1 VALUES(1) ;

1 row inserted.

SQL>
```

```
 ### 세션2 - sys 계정

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbdown post_tx
```

```
 ### 세션1 - tibero 계정

SQL> commit ;

Commit completed.
```

```
 ### 세션2 - sys계정

Tibero instance terminated (POST TX mode).

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$
```

```
 ### 세션2 - sys계정

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbboot
Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started up (NORMAL mode).
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$
```

```
 ### 세션1 - tibero 계정

SQL> CONNECT
Enter Username: tibero
Enter Password:
Connected to Tibero.

SQL> INSERT INTO T1 VALUES(2) ;

1 row inserted.
```

```
 ### 세션2 - sys계정

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbdown immediate

Tibero instance terminated (IMMEDIATE mode).

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$
```

```
 ### 세션2 - sys계정

[tibero@T1:/DataDisk/T1/tibero2/tbdata]$ tbboot
Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started up (NORMAL mode).
[tibero@T1:/DataDisk/T1/tibero2/tbdata]$

### 세션1 - tibero 계정

SQL> connect
Enter Username: tibero
Enter Password:
Connected to Tibero.

SQL> LS TABLE
SQL> SELECT * FROM T1 ;

        C1
----------
         1

1 row selected.
```

```
 파일질라 이용하여 파일서버에 접속할때 접속 않되는 경우, 해결방법은?
=> 
   1) 윈도우에서 WIFI 끄기.
   2) 노트북에 랜케이블을 연결함.
   3) 윈도우 네트웤설정에서 "자동으로 IP 주소받기" 으로 IP 및 DNS 설정을 셋팅함.
   4) cmd(명령프롬프트) 화면에서 ipconfig 명령실행함.
   5) 윈도우 네트웤설정에서 "다음 IP 주소 사용" (IP 및 DNS)을 선택하고,
      위의 4)번에서 조회된 값을 입력함. DNS는 8.8.8.8 입력함.
   6) 웹브라우저를 실행하여 인터넷이 잘 되는지 확인함.
   *** 추가 필수 작업 **
   7) Virtualbox -> T1 -> 설정 -> 네트워크 -> 어댑터 1 -> 고급 -> 포트포워딩
         에서 "호스트 IP" 값으로 위에 확인된 IP 를 입력하여 적용함.
   8) 윈도우-> 제어판 -> 방화벽 -> 방화벽 설정 또는 해제 -> 방화벽 사용않함(개인, 공용 둘다!)
```

```
 <IP관련 설정, 수동으로 변경하기>
제어판\모든 제어판 항목\네트워크 및 공유 센터
-> 어댑터설정변경 -> 이더넷-> 속성-> 이더넷속성 ->
-> 인터넷 프로토콜 버전4(TCP/IPv4)-> 속성 
에서 아래(ipconfig)에서 확인한 값을 입력하여 설정함.

cmd ->
ipconfig ->
이더넷 어댑터 이더넷 
무선 LAN 어댑터 WIFI
-------------------------------------------------
ipconfig 다시 실행하여 출력내용확인
웹브라우저에서 인터넷 접근 잘되는지 확인

< virtualbox 설치>

< virtualbox 에서 가상시스템 가져오기 >
-  머신기본폴더 ==>   C:\_TIBERO_USB\VM
-  MAC주소정책 ==>     모든 네트워크 어댑터 MAC 주소 포함
-   가져오기 이후
     1. 설정-> 네트워크 -> 어댑터2 -> 확인
     2. 설정-> 공유폴더-> C:\_TIBERO_USB\s   설정하기
     3. 설정->네트워크 -> 어댑터1->고급 -> 포트 포워딩
                -> 위에서ipconfig 로 확인한 ip를 "호스트ip" 에 넣기
     4. T1 -> 스냅샷 -> 현재상태 -> 마우스오른쪽 버튼-> 찍기
                -> 가상머신의 스냅샷 찍기 -> 확인
-  시작 : T1 머신 선택하고, 시작 버튼 클릭

< Putty 설치 및 리눅스(T1머신) 접속>

IP : 192.168.56.241  사용하여  LOCAL_T1 접속정보 등록

리눅스 로그인시 tibero 유저 사용(패스워드: tibero)

< FileZilla 설치 및 실행 >
- 설치하고, 공유폴더접속(빠른 연결 버튼)을 함

   호스트   : 172.23.14.72  
   사용자명: edu
  비밀번호:edu
     포트: 21

< 티베로 설치를 위한 파일 리눅스에 넣기 >
   - 윈도우에서 파일을 넣기        C:\_TIBERO_USB\s
   - 리눅스에서 파일을 가져오기  /tibero/s

< 티베로 설치를 위해 설치 경로로 파일 가져오기 >
- 티베로 설치 위치 :   /tibero
- 파일 복사하기
     cp /tibero/s/*   /tibero
- 파일 조회
        ls -l /tibero
        

< 티베로 설치전에 3가지 내용 준비 >

######## TIBERO ENV ########
export TB_HOME=/tibero/tibero6
export TB_SID=tibero
export PATH=.:$TB_HOME/bin:$TB_HOME/client/bin:~/tbinary/monitor:$PATH
export LD_LIBRARY_PATH=$TB_HOME/lib:$TB_HOME/client/lib:$LD_LIBRARY_PATH

DB_NAME=tibero
LISTENER_PORT=8629
CONTROL_FILES="/tibero/tbdata/tibero/c1.ctl","/tibero/tbdata/tibero/c2.ctl"
DB_CREATE_FILE_DEST=/tibero/tbdata/tibero
LOG_ARCHIVE_DEST=/tibero/tbdata/tibero/arch
MAX_SESSION_COUNT=20
TOTAL_SHM_SIZE=600M
MEMORY_TARGET=1G

CREATE DATABASE
USER sys IDENTIFIED BY tibero
MAXDATAFILES 256
CHARACTER SET MSWIN949
NATIONAL CHARACTER SET UTF16
LOGFILE
GROUP0 'log01.log' SIZE 50M,
GROUP1 'log11.log' SIZE 50M,
GROUP2 'log21.log' SIZE 50M
MAXLOGFILES 100
MAXLOGMEMBERS 2
NOARCHIVELOG

DATAFILE 'system001.dtf' SIZE 100M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
------------------------------------------
DEFAULT TEMPORARY TABLESPACE TEMP
TEMPFILE 'temp001.dtf' SIZE 100M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
EXTENT MANAGEMENT LOCAL AUTOALLOCATE
-------------------------------------------
UNDO TABLESPACE UNDO
DATAFILE 'undo001.dtf' SIZE 200M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 128k
-------------------------------------------
DEFAULT TABLESPACE USR
DATAFILE 'usr001.dtf' SIZE 50m
AUTOEXTEND ON NEXT 64m MAXSIZE 3G
-------------------------------------------
SYSSUB
DATAFILE 'syssub001.dtf' SIZE 50m
AUTOEXTEND ON NEXT 64M MAXSIZE 3G ;

< 설치 : 사용자 환경변수 설정 >
 - 파일 : /home/tibero/.bash_profile 
 - 준비한 내용을 위의 파일에 추가함.
    vi /home/tibero/.bash_profile
 
    cat /home/tibero/.bash_profile

< 환경변수 적용 >

   source ~/.bash_profile

<환경변수 확인>

   echo $TB_SID
   echo $TB_HOME

< 바이너리 설치(압축 해제)>

   tar -xvzf  tibero6-bin-*

   ls -al   tibero6

< 라이센스 파일 넣기 >

      cp /tibero/license.xml    /tibero/tibero6/license

   ls -al  /tibero/tibero6/license/license.xml

<초기 환경파일 생성>

cd $TB_HOME/config

./gen_tip.sh

<Tibero 파라미터 파일 수정>

     vi tibero.tip

    cat tibero.tip

<Network 설정 파일 (tbdsn.tbr) 수정>

     vi $TB_HOME/client/config/tbdsn.tbr

     cat $TB_HOME/client/config/tbdsn.tbr

< 티베로 인스턴스 NOMOUNT 모드로 기동 >

    tbboot nomount

< tbsql 이용하여 인스턴스 접속>

    tbsql sys/tibero

< Database 생성 쿼리 실행 >

       - 직접 실행해도 되지만, 파일에 담아서 실행하기~
           
      vi  /tibero/credb.sql
      cat /tibero/credb.sql 
  
    - 파일에 담기 쿼리 실행
       
           tbsql sys/tibero

      @/tibero/credb.sql

< 티베로 인스턴스 normal 모드로 시작 >

         tbboot

< Data Dictionary 및 system 패키지 생성 >

         cd $TB_HOME/scripts

     sh system.sh

            
< 인스턴스 시작 종료 >

        tbboot
  
        tbdown immediate
```

```
 -이솔
tbsql 어디에 존재하는지?
=> tibero 바이너리에 존재함.
     $TB_HOME/client/bin/tbsql  
     파일이 있음.

tbsql 과 tibero instance 관계는?

다음과 같이 각각의 별개의 S/W 임.
tbsql <----------------------------------------------> tibero 
(/tibero/0928/tibero6/client/bin/tbsql           (/tibero/0928/tibero6/.......)

현재 2개의 tibero 바이너리가 있고, 그 안에 tbsql 이 각각 들어있어서
tbsql 이 2개 있는 상태인데, 사용할때 어느것을 사용하는것인지?

-> tbsql 호출하여 실행하게되는데, 이때 환경변수 $PATH 에 정의된 디렉토리를 
    순서대로 검색하여 tbsql 파일을 찾아서 실행하는 동작을 하게됨.

    $TB_HOME 환경변수 값은 /tibero/0928/tibero6 로 정의하였고,
    $PATH 환경변수는 /home/tibero/.bash_profile 에 정의하였고, 
    값은 $TB_HOME/bin  와  $TB_HOME/client/bin 그리고 $PATH 가 정의되어있음.

    따라서 /tibero/0928/tibero6/client/bin/tbsql 이 실행됨.

 

============================================================================================

-박서영

DB_CREATE_FILE_DEST 파라미터 값의 역할은?
   => CREATE DATABASE 문장에서 리두로그 파일, 데이터 파일 이름 앞에 경로가 생략될 경우
        이 파라미터 값이 적용됨,  파일 이름 앞에 경로가 존재할 경우는 파라미터 값이 적용 않됨. 

   => .passwd (sys 유저의 비밀번호가 저장되는 파일)
        파일이 존재하는 경로를 지정한다.   

CREATE DATABASE 문장의 MAX값들 생략가능한가?
  => 설치 조건에 언급되지 않은 값은 자유롭게 설정 해도 됨 !
       참고로, 매뉴얼에 나와있듯이("CREATE DATABASE 구문 부분 매뉴얼 내용")

       CREATE DATABASE 문장의 여러 항목들은 기본값이 존재하며, 생략가능하고 
       생략시, 매뉴얼에 정의된 기본값이 자동으로 적용됨. 

-장수윤
tbboot nomount 실행시, Mismatch host id!! 에러 남 원인은?
   => C:\_TIBERO_USB\SW1\TiberoServer\Tibero6\license.xml
           => host id 가 T1 임!!!

         C:\_TIBERO_USB\SW1\TiberoServer\Tibero6\license (1).xml
            => host id 가 WINDOW_PC 임!!

         교육자료에 포함된 라이센스파일이 위와 같이 2개 임. T1 으로 사용해야 함!!

- 곽보선
  데이터파일 경로 설정방법
    => CREATE DATABASE 문장에서 데이터파일이름 앞에 경로를 표시하여야 함.

- 조창현
  tbboot nomount 시에 ~(tip) file failure :  에서 발생함 원인은?
    => tip 파일 문법이 틀렸을때 발생함. tip 파일을 열어서 문법적인 오류를 수정해야 함.
         메모리 관련 파라미터 설정시, 값의 단위로 사용하는 내용

         예) 100 메가바이트의 경우, 다음과 같이 설정해야 문법 에러가 않남!!
         100MB (X)
         100M   (O)

- 김예진
  DB_CREATE_FILE_DEST 파라미터 역할에서 패스워드 파일과의 연관성은?
   => 이 파라미터 값으로 디렉토리를 사용하고, 해당 디렉토리는 2가지 용도로 사용됨.

        1) CREATE DATABASE ~ 문장의 리두로그파일, 데이터 파일명 앞에 디렉토리가 
            생략될 경우, 이 파라미터에 정의된 디렉토리가 적용됨.

        2) .passwd 파일이 생성되는 위치를 정의함.

- 박지민
  $TB_HOME/client/config/tbdsn.tbr 파일 수정을 않했는데, 영향도는?
   => 원래, 설치과정에서 $TB_SID 에서 정의된 값을 이용하여 만들어지는 파일임.
        생성시점은 gen_tip.sh 실행시점에 자동으로 만들어짐.

        파일 내용을 보면 접속식별자 값이 tibero 인것을 확인할 수 있는데, 
        이 값이 $TB_SID 가 적용된것임.

        DB_NAME 값이 tibero 인것을 확인할 수 있는데, 이 역시 $TB_SID 값이 
        자동적으로 적용된 것임.

        따라서, 오늘 설치조건대로 하려면,    
        어제 진행한 방식대로 tbdsn.tbr 생성된것을 수정하지 않고, 그냥 사용하면 
        않됨!!

        기본 값으로 생성된(설치과정에서 gen_tip.sh 실행에 의해) 내용을 수정하여야 함!
        
    => 이 파일을 누가 사용하는가는, tbsql 이 사용하는 것임...
         tbsql 이 티베로 인스턴스에 접속할 때 사용하는 접속정보임.
      
         원래 이렇게 접속정보 5가지를 직접 입력하는 방식이 기본임.
          -> (번거로움)     tbsql sys/tibero@192.168.56.241:9629/t0928_db
          -> (간단함)        tbsql sys/tibero
                         => tbsql sys/tibero@$TB_SID 
                                   =>$TB_SID 에 해당하는 접속식별자를 tbdsn.tbr 에서 찾아서
                                       활용함.

  
- 정재윤                           
tbboot 시에 c2.ctl 파일에 대한 Control file open failed  라는 Warning 이 나타남.
    => c2.ctl 파일을 

- 장현지
CREATE DATABASE ~ 실행시, password file 생성실패 에러 발생. 조치방법은?
   => 기존 패스워드 파일을 삭제하고, 다시 CREATE DATABASE ~ 실행한다.

        예) 기존 패스워드 파일 삭제하고 확인하기   
        ls -al /tibero/0928/dbs/password   
        rm    /tibero/0928/dbs/password/.passwd

        ls -al /tibero/0928/dbs/password   

- 조창현
putty 에서 백스페이스 키가 잘 않될때?
     => putty 설정에서 Terminal -> Keybord => The Backspace key -> Control-H 선택 하여 적용함.

- 민예린
putty 로 T1 서버에 접속을 하고자 하는데, 접속방법은?
    => 
         1) virtualbox 실행하고, T1 머신을 선택하여 시작 버튼 누름

         2) T1 머신 화면에서 login 메시지가 출력될때 까지 기다려야 함.

         3) putty 실행하고, ip 값 192.168.56.241 과 22번 포트 값을 입력하고, 접속을 한다.

         4) 접속시 유저명과 패스워드는 tibero 와 tibero 를 각각 사용함.

-곽보선
tbboot nomount 시에 shared memory 관련 에러가 남 
    => 기존에 티베로 인스턴스가 동작하다가 비정상 종료가 되면서 사용하던 shared memory segment 를 
          해제하지 못하였고, 지금 tbboot 하면서 이를 다시 할당받으려구 하면서 발생하는 에러임.
        
          에러 메시지를 보면 reuse 라는 내용이 나옴. 이는 재사용을 함으로써 문제 없이 동작함을 의미함.

          그런데, 과거의 tibero 5 버전의 경우 reuse 를 못하였고, 수동으로 제거하고 시작 하여야 했음...
```

```
 -이충훈
티베로 접속시 사용하는 항목은 무엇인가?
-> 유저명, 패스워드,ip,port, 데이터베이스이름

티베로 인스턴스가 시작되어 있고, 
tbsql sys/tibero 으로 접속시, 다음과 같은 에러남
 TBR-2131: Generic I/O error 
 해결방법은?
-> tbdsn.tbr 파일 내용이 잘못되어 있어서 수정해야함.  
    예) port 또는 db_name 항목 값이 잘못되어 있는 경우~

-방지민
티베로 설치과정을 전부 완료하고나서, tbsql sys/tibero 접속하였다.
그리고, DESC V$LOG 실행하였는데 다음과 같은 에러가 남

TBR-8033: Specified schema object was not found.

해결방법은?
-> 설치과정에서 $TB_HOME/scripts/system.sh 를 실행할때 입력항목
    이 여러가지가 있는데, 값을 잘못 입력했을때 이러한 오류가 남.

    따라서, 딕셔너리가 정상적으로 생성이 않되서 발생하는 에러다.

    cd  $TB_HOME/scripts
    sh system.sh -p1 tibero -p2 syscat -a1 y -a2 y -a3 y -a4 y

    위와 같이 system.sh 를 다시 실행하여, 딕셔너리 재생성을 한다.
    

- 이강훈
tbboot 실행시 tip file failuere 에러가 남. 원인은?
-> tip 파일 내에 작성된 문장의 문법이 틀렸을 경우 발생함.
    문장을 확인하여 수정하여야 한다. 예) 공백이 잘못 들어간 경우...

- 박용관
리두로그 맴버를 2개씩 정의하려면, CREATE DATABASE ~ 문장에서 
어떻게 내용을 작성해야 하는가?
-> Tibero SQL 참조 안내서 -> 7.24. CREATE DATABASE 부분의 윗쪽으로 
    스크롤하여 나오는 문장, 즉 아래의 문장임.

  LOGFILE
    GROUP 0 (
              '/disk2/log101.log',
              '/disk3/log102.log'
            ) SIZE 1M,
    GROUP 1 (
              '/disk1/log103.log',
              '/disk2/log104.log',
              '/disk3/log105.log'
            ) SIZE 2M

    위의 문법 형식을 참고하여 맴버를 여러개 정의 하면 됨.
```

```
 -이충훈
티베로 접속시 사용하는 항목은 무엇인가?
-> 유저명, 패스워드,ip,port, 데이터베이스이름

티베로 인스턴스가 시작되어 있고, 
tbsql sys/tibero 으로 접속시, 다음과 같은 에러남
 TBR-2131: Generic I/O error 
 해결방법은?
-> tbdsn.tbr 파일 내용이 잘못되어 있어서 수정해야함.  
    예) port 또는 db_name 항목 값이 잘못되어 있는 경우~

-방지민
티베로 설치과정을 전부 완료하고나서, tbsql sys/tibero 접속하였다.
그리고, DESC V$LOG 실행하였는데 다음과 같은 에러가 남

TBR-8033: Specified schema object was not found.

해결방법은?
-> 설치과정에서 $TB_HOME/scripts/system.sh 를 실행할때 입력항목
    이 여러가지가 있는데, 값을 잘못 입력했을때 이러한 오류가 남.

    따라서, 딕셔너리가 정상적으로 생성이 않되서 발생하는 에러다.

    cd  $TB_HOME/scripts
    sh system.sh -p1 tibero -p2 syscat -a1 y -a2 y -a3 y -a4 y

    위와 같이 system.sh 를 다시 실행하여, 딕셔너리 재생성을 한다.
    

- 이강훈
tbboot 실행시 tip file failuere 에러가 남. 원인은?
-> tip 파일 내에 작성된 문장의 문법이 틀렸을 경우 발생함.
    문장을 확인하여 수정하여야 한다. 예) 공백이 잘못 들어간 경우...

- 박용관
리두로그 맴버를 2개씩 정의하려면, CREATE DATABASE ~ 문장에서 
어떻게 내용을 작성해야 하는가?
-> Tibero SQL 참조 안내서 -> 7.24. CREATE DATABASE 부분의 윗쪽으로 
    스크롤하여 나오는 문장, 즉 아래의 문장임.

  LOGFILE
    GROUP 0 (
              '/disk2/log101.log',
              '/disk3/log102.log'
            ) SIZE 1M,
    GROUP 1 (
              '/disk1/log103.log',
              '/disk2/log104.log',
              '/disk3/log105.log'
            ) SIZE 2M

    위의 문법 형식을 참고하여 맴버를 여러개 정의 하면 됨.
```

```
 -배규리
CREATE DATABASE ~ 실행 결과 에러 발생. 에러는 컨트롤파일 생성 실패 에러가 남.
=> 위의 명령실행으로 3가지 종류의 파일이 만들어지게됨
    - 데이터파일
	- 리두로그 파일
	- 컨트롤 파일

   따라서, 컨트롤 파일 생성 실패일 경우, 기존 컨트롤 파일이 있는지 확인하여 삭제한다.
   
-김형인
티베로 인스턴스가 기동중인지 프로세스 확인 방법은?
=>   ps -ef | grep tbsvr

-김연홍
CREATE DATABASE ~ 실행시, old password .... 에러 발생함. 해결책은?
=> 기존에 생성된 패스워드 파일이 존재하기 때문임, 이를 삭제하고 실행해야 함.
   파라미터 DB_CREATE_FILES_DEST 에서 정의된 디렉토리에 패스워드 파일이 존재함.

   /tibero/0928/dbs/password/.passwd
   
   
-곽성신
create database 문장에 포함된 maxlogfiles 등등 max로 시작하는 항목들의 의미는?
-> controlfile 의 크기와 관련이 있다. 컨트롤파일은 생성될때 데이터파일들과 리두로그 
   파일들의 목록을 저장할수 있는 공간을 확보하여 생성된다. 따라서, 컨트롤 파일 생성이후에 
   최대값을 초과하는 리두로그 파일을 정의할 경우, 컨트롤 파일안에 해당 파일정보를 저장할 
   공간이 없어서 에러가 나게 된다.
```

```
 <IP관련 설정, 수동으로 변경하기>
제어판\모든 제어판 항목\네트워크 및 공유 센터
-> 어댑터설정변경 -> 이더넷-> 속성-> 이더넷속성 ->
-> 인터넷 프로토콜 버전4(TCP/IPv4)-> 속성 
에서 아래(ipconfig)에서 확인한 값을 입력하여 설정함.

cmd ->
ipconfig ->
이더넷 어댑터 이더넷 
무선 LAN 어댑터 WIFI
-------------------------------------------------
ipconfig 다시 실행하여 출력내용확인
웹브라우저에서 인터넷 접근 잘되는지 확인

< virtualbox 설치>

< virtualbox 에서 가상시스템 가져오기 >
-  머신기본폴더 ==>   C:\_TIBERO_USB\VM
-  MAC주소정책 ==>     모든 네트워크 어댑터 MAC 주소 포함
-   가져오기 이후
     1. 설정-> 네트워크 -> 어댑터2 -> 확인
     2. 설정-> 공유폴더-> C:\_TIBERO_USB\s   설정하기
     3. 설정->네트워크 -> 어댑터1->고급 -> 포트 포워딩
                -> 위에서ipconfig 로 확인한 ip를 "호스트ip" 에 넣기
     4. T1 -> 스냅샷 -> 현재상태 -> 마우스오른쪽 버튼-> 찍기
                -> 가상머신의 스냅샷 찍기 -> 확인
-  시작 : T1 머신 선택하고, 시작 버튼 클릭

< Putty 설치 및 리눅스(T1머신) 접속>

IP : 192.168.56.241  사용하여  LOCAL_T1 접속정보 등록

리눅스 로그인시 tibero 유저 사용(패스워드: tibero)

< FileZilla 설치 및 실행 >
- 설치하고, 공유폴더접속(빠른 연결 버튼)을 함

   호스트   : 172.23.14.72  
   사용자명: edu
  비밀번호:edu
     포트: 21

< 티베로 설치를 위한 파일 리눅스에 넣기 >
   - 윈도우에서 파일을 넣기        C:\_TIBERO_USB\s
   - 리눅스에서 파일을 가져오기  /tibero/s

< 티베로 설치를 위해 설치 경로로 파일 가져오기 >
- 티베로 설치 위치 :   /tibero
- 파일 복사하기
     cp /tibero/s/*   /tibero
- 파일 조회
        ls -l /tibero
        

< 티베로 설치전에 3가지 내용 준비 >

######## TIBERO ENV ########
export TB_HOME=/tibero/tibero6
export TB_SID=tibero
export PATH=.:$TB_HOME/bin:$TB_HOME/client/bin:~/tbinary/monitor:$PATH
export LD_LIBRARY_PATH=$TB_HOME/lib:$TB_HOME/client/lib:$LD_LIBRARY_PATH

DB_NAME=tibero
LISTENER_PORT=8629
CONTROL_FILES="/tibero/tbdata/tibero/c1.ctl","/tibero/tbdata/tibero/c2.ctl"
DB_CREATE_FILE_DEST=/tibero/tbdata/tibero
LOG_ARCHIVE_DEST=/tibero/tbdata/tibero/arch
MAX_SESSION_COUNT=20
TOTAL_SHM_SIZE=600M
MEMORY_TARGET=1G

CREATE DATABASE
USER sys IDENTIFIED BY tibero
MAXDATAFILES 256
CHARACTER SET MSWIN949
NATIONAL CHARACTER SET UTF16
LOGFILE
GROUP0 'log01.log' SIZE 50M,
GROUP1 'log11.log' SIZE 50M,
GROUP2 'log21.log' SIZE 50M
MAXLOGFILES 100
MAXLOGMEMBERS 2
NOARCHIVELOG

DATAFILE 'system001.dtf' SIZE 100M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
------------------------------------------
DEFAULT TEMPORARY TABLESPACE TEMP
TEMPFILE 'temp001.dtf' SIZE 100M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
EXTENT MANAGEMENT LOCAL AUTOALLOCATE
-------------------------------------------
UNDO TABLESPACE UNDO
DATAFILE 'undo001.dtf' SIZE 200M
AUTOEXTEND ON NEXT 64M MAXSIZE 3G
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 128k
-------------------------------------------
DEFAULT TABLESPACE USR
DATAFILE 'usr001.dtf' SIZE 50m
AUTOEXTEND ON NEXT 64m MAXSIZE 3G
-------------------------------------------
SYSSUB
DATAFILE 'syssub001.dtf' SIZE 50m
AUTOEXTEND ON NEXT 64M MAXSIZE 3G ;

< 설치 : 사용자 환경변수 설정 >
 - 파일 : /home/tibero/.bash_profile 
 - 준비한 내용을 위의 파일에 추가함.
    vi /home/tibero/.bash_profile
 
    cat /home/tibero/.bash_profile

< 환경변수 적용 >

   source ~/.bash_profile

<환경변수 확인>

   echo $TB_SID
   echo $TB_HOME

< 바이너리 설치(압축 해제)>

   tar -xvzf  tibero6-bin-*

   ls -al   tibero6

< 라이센스 파일 넣기 >

      cp /tibero/license.xml    /tibero/tibero6/license

   ls -al  /tibero/tibero6/license/license.xml

<초기 환경파일 생성>

cd $TB_HOME/config

./gen_tip.sh

<Tibero 파라미터 파일 수정>

     vi tibero.tip

    cat tibero.tip

<Network 설정 파일 (tbdsn.tbr) 수정>

     vi $TB_HOME/client/config/tbdsn.tbr

     cat $TB_HOME/client/config/tbdsn.tbr

< 티베로 인스턴스 NOMOUNT 모드로 기동 >

    tbboot nomount

< tbsql 이용하여 인스턴스 접속>

    tbsql sys/tibero

< Database 생성 쿼리 실행 >

       - 직접 실행해도 되지만, 파일에 담아서 실행하기~
           
      vi  /tibero/credb.sql
      cat /tibero/credb.sql 
  
    - 파일에 담기 쿼리 실행
       
           tbsql sys/tibero

      @/tibero/credb.sql

< 티베로 인스턴스 normal 모드로 시작 >

         tbboot

< Data Dictionary 및 system 패키지 생성 >

         cd $TB_HOME/scripts

     sh system.sh

            
< 인스턴스 시작 종료 >

        tbboot
  
        tbdown immediate
```

```
 
```

```
 
```

[tibero@T1:/DataDisk/T1/tibero2]$ tbdown
tbdown failed. proc info file is deleted.
Hint: Please check if the tbsvr instance was already stopped.
[tibero@T1:/DataDisk/T1/tibero2]$ ps -ef | grep tbsvr
tibero   26233 18629  0 11:34 pts/1    00:00:00 grep --color=auto tbsvr

#tbdown 되었는지 확인하려면 ps 명령어로 프로세스 살아있나 체크

[tibero@T1:/DataDisk/T1/tibero2]$ cp tbdata2/*.ctl tbdata

#Control File 만 해당 경로에 복사

[tibero@T1:/DataDisk/T1/tibero2]$ ls -l tbdata
total 44576
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c1.ctl
-rw------- 1 tibero dba 22822912 Jul 14 11:34 c2.ctl

#Control File만 있는 상태

[tibero@T1:/DataDisk/T1/tibero2]$ tbboot

#디폴트 값인 Normal모드로 부트시킴

Change core dump dir to /tibero/edu/tibero6/bin/prof.
Listener port = 8629

---

- Critical Warning : Raise svmode failed. The reason is
- TBR-1024 : Database needs media recovery: open failed(/DataDisk/T1/tibero2/tbdata/system001.dtf).
- Current server mode is MOUNT.

---

#파일이 손상되거나 찾을 수 없을 때 나오는 에러 메시지
#에러 내용 미디어 복구가 필요 (미디어 : 저장장치(하드디스크))
#에러 다음은 진행하지 않고, Open 모드 못하고 Mount모드까지만 함.
#즉, 다른 파일은 문제가 없다는 뜻은 아님.
#쿼리 접근 불가

Tibero 6

TmaxData Corporation Copyright (c) 2008-. All rights reserved.
Tibero instance started suspended at MOUNT mode.